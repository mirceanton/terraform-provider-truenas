---
page_title: "truenas_dataset Resource - terraform-provider-truenas"
subcategory: ""
description: |-
  Manages a TrueNAS dataset. Use nested datasets instead of host_path for app storage.
---

# truenas_dataset (Resource)

Manages a TrueNAS dataset. Use nested datasets instead of host_path for app storage.

## Example Usage

### Basic Dataset

```terraform
# Create a new ZFS dataset for application data
resource "truenas_dataset" "app_data" {
  pool        = "tank"
  path        = "apps/myapp"
  compression = "lz4"
  quota       = "100G"
  atime       = "off"
}

# Create a nested dataset using parent reference
resource "truenas_dataset" "app_logs" {
  parent = truenas_dataset.app_data.id
  path   = "logs"
}
```

### Dataset with Quota and Permissions

```terraform
resource "truenas_dataset" "apps" {
  pool        = "tank"
  path        = "apps"
  compression = "lz4"
  quota       = "100G"
  mode        = "755"
  uid         = 1000
  gid         = 1000
}
```

> **Note:** When `uid` or `gid` is specified, `mode` is required. TrueNAS requires explicit permissions when setting ownership.

### Creating from Snapshot (Clone)

```terraform
resource "truenas_dataset" "restored" {
  pool        = "tank"
  path        = "apps/restored"
  snapshot_id = truenas_snapshot.backup.id
}
```

### Nested Dataset

```terraform
resource "truenas_dataset" "parent" {
  pool = "tank"
  path = "data"
}

resource "truenas_dataset" "child" {
  parent = truenas_dataset.parent.id
  path   = "apps"
}
```

## Import

Datasets can be imported using the full dataset path:

```shell
terraform import truenas_dataset.example tank/data/apps
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `atime` (String) Access time tracking ('on' or 'off').
- `compression` (String) Compression algorithm (e.g., 'lz4', 'zstd', 'off').
- `force_destroy` (Boolean) When destroying this resource, also delete all child datasets. Defaults to false.
- `gid` (Number) Owner group ID for the dataset mountpoint.
- `mode` (String) Unix mode for the dataset mountpoint (e.g., '755'). Sets permissions via filesystem.setperm after creation.
- `name` (String, Deprecated) Dataset name. Use with 'parent' attribute.
- `parent` (String) Parent dataset ID (e.g., 'tank/data'). Use with 'path' attribute.
- `path` (String) Dataset path. With 'pool': relative path in pool. With 'parent': child dataset name.
- `pool` (String) Pool name. Use with 'path' attribute for pool-relative paths.
- `quota` (String) Dataset quota. Accepts human-readable sizes (e.g., '10G', '500M', '1T') or bytes. See https://pkg.go.dev/github.com/dustin/go-humanize#ParseBytes for format details.
- `refquota` (String) Dataset reference quota. Accepts human-readable sizes (e.g., '10G', '500M', '1T') or bytes. See https://pkg.go.dev/github.com/dustin/go-humanize#ParseBytes for format details.
- `snapshot_id` (String) Create dataset as clone from this snapshot. Mutually exclusive with other creation options.
- `uid` (Number) Owner user ID for the dataset mountpoint.

### Read-Only

- `full_path` (String) Full filesystem path to the mounted dataset (e.g., '/mnt/tank/data').
- `id` (String) Dataset identifier (pool/path).
- `mount_path` (String, Deprecated) Filesystem mount path.
