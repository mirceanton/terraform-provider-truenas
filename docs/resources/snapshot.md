---
page_title: "truenas_snapshot Resource - terraform-provider-truenas"
subcategory: ""
description: |-
  Manages a ZFS snapshot. Use for pre-upgrade backups and point-in-time recovery.
---

# truenas_snapshot (Resource)

Manages a ZFS snapshot. Use for pre-upgrade backups and point-in-time recovery.

## Example Usage

### Basic Snapshot

```terraform
# Create a snapshot before making changes
resource "truenas_snapshot" "backup" {
  dataset_id = truenas_dataset.data.id
  name       = "pre-upgrade-backup"
}
```

### Held Snapshot (Protected from Deletion)

```terraform
resource "truenas_snapshot" "protected" {
  dataset_id = "tank/important"
  name       = "pre-migration"
  hold       = true
}
```

### Recursive Snapshot

```terraform
resource "truenas_snapshot" "recursive" {
  dataset_id = "tank/data"
  name       = "full-backup"
  recursive  = true
}
```

## Import

Snapshots can be imported using the snapshot ID (dataset@name):

```shell
terraform import truenas_snapshot.example tank/data@backup
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `dataset_id` (String) Dataset ID to snapshot. Reference a truenas_dataset resource or data source.
- `name` (String) Snapshot name.

### Optional

- `hold` (Boolean) Prevent automatic deletion. Default: false.
- `recursive` (Boolean) Include child datasets. Default: false. Only used at create time.

### Read-Only

- `createtxg` (String) Transaction group when snapshot was created.
- `id` (String) Snapshot identifier (dataset@name).
- `referenced_bytes` (Number) Space referenced by snapshot.
- `used_bytes` (Number) Space consumed by snapshot.
