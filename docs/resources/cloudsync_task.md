---
page_title: "truenas_cloudsync_task Resource - terraform-provider-truenas"
subcategory: ""
description: |-
  Manages cloud sync backup tasks.
---

# truenas_cloudsync_task (Resource)

Manages cloud sync backup tasks.

## Example Usage

### Basic S3 Backup

```terraform
# Create a daily backup task to S3
resource "truenas_cloudsync_task" "backup" {
  description   = "Daily backup to S3"
  path          = "/mnt/tank/data"
  credentials   = truenas_cloudsync_credentials.s3.id
  direction     = "push"
  transfer_mode = "sync"

  schedule {
    minute = "0"
    hour   = "2"
  }

  s3 {
    bucket = "my-backup-bucket"
    folder = "truenas-backup"
  }

  enabled = true
}
```

### Encrypted Backup with Bandwidth Limit

```terraform
resource "truenas_cloudsync_task" "encrypted_backup" {
  description   = "Encrypted backup to B2"
  path          = "/mnt/tank/sensitive"
  credentials   = truenas_cloudsync_credentials.b2.id
  direction     = "push"
  transfer_mode = "copy"

  schedule {
    minute = "0"
    hour   = "3"
  }

  b2 {
    bucket = "my-b2-bucket"
    folder = "encrypted-backup"
  }

  encryption {
    password = var.encryption_password
    salt     = var.encryption_salt
  }

  bwlimit   = "10M"
  transfers = 4
  exclude   = ["*.tmp", "*.log"]
}
```

### Selective Backup with Include Patterns

```terraform
resource "truenas_cloudsync_task" "photos_only" {
  description   = "Backup photos only"
  path          = "/mnt/tank/media"
  credentials   = truenas_cloudsync_credentials.s3.id
  direction     = "push"
  transfer_mode = "sync"

  schedule {
    minute = "30"
    hour   = "1"
  }

  s3 {
    bucket = "my-photos-bucket"
    folder = "backup"
  }

  include = ["/photos/**", "*.jpg", "*.png", "*.raw"]
  exclude = ["**/thumbnails/**"]
}
```

## Import

Tasks can be imported using the numeric ID:

```shell
terraform import truenas_cloudsync_task.example 1
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `credentials` (Number) Cloud sync credentials ID.
- `description` (String) Task description.
- `direction` (String) Sync direction: push, pull, or sync.
- `path` (String) Local path to sync.

### Optional

- `azure` (Block, Optional) Azure Blob Storage settings. (see [below for nested schema](#nestedblock--azure))
- `b2` (Block, Optional) Backblaze B2 storage settings. (see [below for nested schema](#nestedblock--b2))
- `bwlimit` (String) Bandwidth limit in KB/s or schedule.
- `create_empty_src_dirs` (Boolean) Create empty source directories on destination.
- `enabled` (Boolean) Enable the task.
- `encryption` (Block, Optional) Encryption settings for cloud storage. (see [below for nested schema](#nestedblock--encryption))
- `exclude` (List of String) Patterns to exclude from sync.
- `follow_symlinks` (Boolean) Follow symbolic links.
- `gcs` (Block, Optional) Google Cloud Storage settings. (see [below for nested schema](#nestedblock--gcs))
- `include` (List of String) Patterns to include in sync. Supports glob patterns like '/folder/**' or '*.jpg'.
- `s3` (Block, Optional) S3-compatible storage settings. (see [below for nested schema](#nestedblock--s3))
- `schedule` (Block, Optional) Cron schedule for the task. (see [below for nested schema](#nestedblock--schedule))
- `snapshot` (Boolean) Take a snapshot before sync.
- `sync_on_change` (Boolean) Fire-and-forget sync after create or update.
- `transfer_mode` (String) Transfer mode: sync, copy, or move.
- `transfers` (Number) Number of simultaneous file transfers.

### Read-Only

- `id` (String) Task ID.

<a id="nestedblock--azure"></a>
### Nested Schema for `azure`

Optional:

- `container` (String) Container name.
- `folder` (String) Folder path within the container.


<a id="nestedblock--b2"></a>
### Nested Schema for `b2`

Optional:

- `bucket` (String) Bucket name.
- `folder` (String) Folder path within the bucket.


<a id="nestedblock--encryption"></a>
### Nested Schema for `encryption`

Optional:

- `password` (String, Sensitive) Encryption password.
- `salt` (String, Sensitive) Encryption salt.


<a id="nestedblock--gcs"></a>
### Nested Schema for `gcs`

Optional:

- `bucket` (String) Bucket name.
- `folder` (String) Folder path within the bucket.


<a id="nestedblock--s3"></a>
### Nested Schema for `s3`

Optional:

- `bucket` (String) Bucket name.
- `folder` (String) Folder path within the bucket.


<a id="nestedblock--schedule"></a>
### Nested Schema for `schedule`

Required:

- `hour` (String) Hour (0-23 or cron expression).
- `minute` (String) Minute (0-59 or cron expression).

Optional:

- `dom` (String) Day of month (1-31 or cron expression).
- `dow` (String) Day of week (0-6 or cron expression).
- `month` (String) Month (1-12 or cron expression).
