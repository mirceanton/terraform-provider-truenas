---
page_title: "truenas_file Resource - terraform-provider-truenas"
subcategory: ""
description: |-
  Manages a file on TrueNAS for configuration deployment.
---

# truenas_file (Resource)

Manages a file on TrueNAS for configuration deployment.

## Example Usage

### Using host_path reference

Deploy configuration files within a managed host path directory:

```terraform
# Deploy a configuration file using host_path reference
resource "truenas_host_path" "app_config" {
  path = "/mnt/tank/apps/myapp/config"
  mode = "755"
  uid  = 1000
  gid  = 1000
}

resource "truenas_file" "app_config" {
  host_path     = truenas_host_path.app_config.id
  relative_path = "settings.json"
  content       = jsonencode({
    app_name = "myapp"
    debug    = false
  })
  mode = "0644"
}

# Deploy a file using absolute path
resource "truenas_file" "nginx_config" {
  path    = "/mnt/tank/apps/nginx/nginx.conf"
  content = file("${path.module}/nginx.conf")
  mode    = "0644"
  uid     = 0
  gid     = 0
}

# Deploy a file from template
resource "truenas_file" "app_env" {
  host_path     = truenas_host_path.app_config.id
  relative_path = ".env"
  content       = templatefile("${path.module}/env.tpl", {
    database_url = "postgres://localhost:5432/mydb"
    api_key      = var.api_key
  })
}
```

### Using absolute path

Deploy a file to a specific location:

```terraform
resource "truenas_file" "nginx_config" {
  path    = "/mnt/tank/apps/nginx/nginx.conf"
  content = file("${path.module}/nginx.conf")
  mode    = "0644"
  uid     = 0
  gid     = 0
}
```

### Using templatefile

Deploy configuration from a template:

```terraform
resource "truenas_file" "app_env" {
  path    = "/mnt/tank/apps/myapp/.env"
  content = templatefile("${path.module}/env.tpl", {
    database_url = var.database_url
    api_key      = var.api_key
  })
  mode = "0600"
  uid  = 1000
  gid  = 1000
}
```

## Import

Files can be imported using their absolute path:

```shell
terraform import truenas_file.example /mnt/tank/apps/myapp/config.json
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `content` (String, Sensitive) Content of the file. Use templatefile() or file() to load from disk.

### Optional

- `force_destroy` (Boolean) Change file ownership to root before deletion to handle permission issues from app containers.
- `gid` (Number) Owner group ID. Inherits from host_path if not specified.
- `host_path` (String) ID of a truenas_host_path resource. Mutually exclusive with 'path'.
- `mode` (String) Unix mode (e.g., '0644'). Inherits from host_path if not specified.
- `path` (String) Absolute path to the file. Mutually exclusive with 'host_path'/'relative_path'.
- `relative_path` (String) Path relative to host_path. Can include subdirectories (e.g., 'config/app.conf').
- `uid` (Number) Owner user ID. Inherits from host_path if not specified.

### Read-Only

- `checksum` (String) SHA256 checksum of the file content.
- `id` (String) File identifier (the full path).
